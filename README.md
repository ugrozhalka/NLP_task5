# Telegram-бот с локальной LLM (NLP Task 5)

Телеграм-бот, разработанный для лабораторной работы №5 по дисциплине  
**«Обработка естественного языка»**.  
Бот использует локально развернутую языковую модель через **LM Studio** и  
поддерживает персональный контекст диалога для каждого пользователя.
<br><a href="t.me/ugrozhalka_task5_bot">Ссылка на бота</a>
---

## Возможности бота

1. Отвечает на сообщения через локальную LLM  
2. Хранит и использует историю диалога  
3. Каждому пользователю ведётся отдельный контекст  
4. Поддерживает команды:

    - `/start` — приветствие и список доступных команд  
    - `/model` — вывод названия загруженной модели  
    - `/clear` — очистка контекста текущего пользователя  

---

## Как работает контекст

История переписки хранится в Python-словаре:

```python
user_contexts = {
    user_id: "role: user ... role: assistant ..."
}
```

При новом сообщении:

1. Бот добавляет реплику в историю  
2. Передаёт всю историю диалога в LM Studio  
3. Получает ответ и добавляет его обратно в контекст  
4. Отправляет ответ пользователю  

---

## Требования перед запуском

### 1. Установить LM Studio  
https://lmstudio.ai/

### 2. Загрузить модель с Hugging Face  
Подойдут небольшие инструктивные GGUF модели (например:  
**Qwen2.5-1.5B-Instruct-GGUF**).

### 3. Запустить локальный сервер LM Studio  
В LM Studio:
1. Вкладка **Developer** слева
<img width="1920" height="1080" alt="image" src="https://github.com/user-attachments/assets/96345d01-c707-4b04-8453-c1fd7d096661" />

2. Нажать на ползунок рядом с "Status: Stopped"
<img width="1920" height="1080" alt="image" src="https://github.com/user-attachments/assets/4bf0ad7f-1f41-487b-af1a-7e434c3db3c2" />

Стандартный адрес:  
```
http://localhost:1234
```

### 4. Установить зависимости Python

```bash
pip install telebot requests jsons
```

### 5. Запуск бота
Делаем следующие шаги:
- Открыть терминал в папке с проектом
- Запустить команду:
```bash
python main.py
```

### 6. Открываем бота в телеграмме и общаемся!
---

## Автор
Ивашкова Ульяна, ФИИТ-4.2

Лабораторная работа №5 по курсу **«Обработка естественного языка»**.
